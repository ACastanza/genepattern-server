<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
            <title>GetFileDotJsp</title>
</head>
    
<body>

<p>Test specification for GpFilePathFactory support for legacy web upload and tasklib files, using the <b>getFile.jsp</b> page.</p>
<pre>
Example tasklib file:
    <GenePatternURL>getFile.jsp?task=urn:lsid:8080.gp-trunk-dev.120.0.0.1:genepatternmodules:85:2&file=all_aml_test.cls

Example web upload file:
    <GenePatternURL>getFile.jsp?task=&job=1222&file=test_run89....546.tmp/all_aml_test.gct
</pre>
<p><b>Note:</b> tests for tasklib files are a bit messy because they depend on a valid TaskInfoCache and on the 
DirectoryManager.getTaskLibDir(taskInfo) which creates a file on the filesystem (whether you want it or not). 
</p>


<table><tbody>
<tr>
<td> rule for </td>
<td class='confluenceTd'> GetFileDotJsp </td>
</tr>
<tr>
<td > urlStr </td>
<td > url? </td>
<td> serverFile? </td>
<td> relativeFile? </td>
<td> owner? </td>
</tr>
<!--  test cases for web upload files -->
<tr>
<!--  forward slash (/) in file path -->
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test_run1000001.tmp/all_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test_run1000001.tmp%2Fall_aml_test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/test_run1000001.tmp/all_aml_test.gct </td>
<td> test_run1000001.tmp/all_aml_test.gct </td>
<td> test </td>
</tr>

<tr>
<!--  properly url form encoded file path -->
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test_run1000002.tmp%2Fall_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test_run1000002.tmp%2Fall_aml_test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/test_run1000002.tmp/all_aml_test.gct </td>
<td> test_run1000002.tmp/all_aml_test.gct </td>
<td> test </td>
</tr>

<tr>
<!-- '@' sign in userid -->
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=pcarr%40broad.mit.edu_run1000003.tmp%2Fall_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=pcarr%40broad.mit.edu_run1000003.tmp%2Fall_aml_test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/pcarr@broad.mit.edu_run1000003.tmp/all_aml_test.gct </td>
<td> pcarr@broad.mit.edu_run1000003.tmp/all_aml_test.gct </td>
<td> pcarr@broad.mit.edu </td>
</tr>

<tr>
<!--  space ' ' char in userid -->
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test+user_run1000004.tmp%2Fall_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test+user_run1000004.tmp%2Fall_aml_test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/test user_run1000004.tmp/all_aml_test.gct </td>
<td> test user_run1000004.tmp/all_aml_test.gct </td>
<td> test user </td>
</tr>

<tr>
<!--  space ' ' char encode with %20 in userid -->
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test%20user_run1000004.tmp%2Fall_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test+user_run1000004.tmp%2Fall_aml_test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/test user_run1000004.tmp/all_aml_test.gct </td>
<td> test user_run1000004.tmp/all_aml_test.gct </td>
<td> test user </td>
</tr>

<tr>
<!--  more fun with space ' ' and slash chars -->
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test+user_run1000004.tmp%2Fall+aml+test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test+user_run1000004.tmp%2Fall+aml+test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/test user_run1000004.tmp/all aml test.gct </td>
<td> test user_run1000004.tmp/all aml test.gct </td>
<td> test user </td>
</tr>
<tr>
<!--  <GenePatternURL> in filepath -->
<td> &lt;GenePatternURL&gt;getFile.jsp?task=&job=1222&file=test_run1000002.tmp%2Fall_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/getFile.jsp?task=&job=1222&file=test_run1000002.tmp%2Fall_aml_test.gct </td>
<td> /Applications/GenePatternServer/Tomcat/temp/test_run1000002.tmp/all_aml_test.gct </td>
<td> test_run1000002.tmp/all_aml_test.gct </td>
<td> test </td>
</tr>


</tbody></table>

</body>
</html>