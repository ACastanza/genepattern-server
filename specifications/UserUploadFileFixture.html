<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
            <title>UserUploadFileFixture</title>
</head>
    
<body>

<p>This document describes the API for mapping user uploaded files to URLs and server file paths.</p>
<p>See the <a href="http://www.boost.org/doc/libs/1_36_0/libs/filesystem/doc/portability_guide.htm">See Boost Portability Guide</a>
for guidelines on file names.
</p>

<table class='confluenceTable'><tbody>
<tr>
<td> rule for </td>
<td class='confluenceTd'> UserUploadFile </td>
</tr>
<tr>
<td > userId </td>
<td > parentDir </td>
<td > filename </td>
<td > url? </td>
<td> serverFile? </td>
<td> relativeFile? </td>
</tr>
<tr>
<td> test </td>
<td>&nbsp;</td>
<td> all_aml_test.gct </td>
<td>http://127.0.0.1:8080/gp/users/test/all_aml_test.gct</a> </td>
<td> /Applications/GenePatternServer/users/test/uploads/all_aml_test.gct </td>
<td> all_aml_test.gct </td>
</tr>
<tr>
<td> test </td>
<td>&nbsp;</td>
<td> all aml test.gct </td>
<td>http://127.0.0.1:8080/gp/users/test/all%20aml%20test.gct</td>
<td> /Applications/GenePatternServer/users/test/uploads/all aml test.gct </td>
<td> all aml test.gct </td>
</tr>
<tr>
<td> test </td>
<td>&nbsp;</td>
<td> all@test.gct </td>
<td>http://127.0.0.1:8080/gp/users/test/all%40test.gct</td>
<td> /Applications/GenePatternServer/users/test/uploads/all@test.gct </td>
<td> all@test.gct </td>
</tr>
<tr>
<td> pcarr@broadinstitute.org </td>
<td>&nbsp;</td>
<td> all_aml_test.gct </td>
<td>http://127.0.0.1:8080/gp/users/pcarr%40broadinstitute.org/all_aml_test.gct</td>
<td> /Applications/GenePatternServer/users/pcarr@broadinstitute.org/uploads/all_aml_test.gct </td>
<td> all_aml_test.gct </td>
</tr>
<tr>
<td> Ed Spacey </td>
<td>&nbsp;</td>
<td> all_aml_test.gct </td>
<td>http://127.0.0.1:8080/gp/users/Ed%20Spacey/all_aml_test.gct</td>
<td> /Applications/GenePatternServer/users/Ed Spacey/uploads/all_aml_test.gct </td>
<td> all_aml_test.gct </td>
</tr>

<tr>
<td> test </td>
<td> ../../ </td>
<td> all_aml_test.gct </td>
<td> error </td>
<td> error </td>
<td> error </td>
</tr>

<tr>
<td> test </td>
<td> ./sub </td>
<td> all_aml_test.gct </td>
<td> http://127.0.0.1:8080/gp/users/test/sub/all_aml_test.gct </td>
<td> /Applications/GenePatternServer/users/test/uploads/sub/all_aml_test.gct </td>
<td> sub/all_aml_test.gct </td>
</tr>

</tbody></table>



<p>Some test cases with files uploaded to sub directories</p>
<table><tbody>
<tr>
<td> rule for </td>
<td> UserUploadFile </td>
<td> <b>userId</b> </td>
<td> test </td>
<td> <b>genePatternUrl</b> </td>
<td>http://127.0.0.1:8080/gp</td>
</tr>
<tr>
<td> parentDir </td>
<td> filename </td>
<td> url? </td>
<td> serverFile? </td>
<td> relativeFile? </td>
</tr>
<tr>
<td> sub </td>
<td> a.txt </td>
<td> http://127.0.0.1:8080/gp/users/test/sub/a.txt </td>
<td> /Applications/GenePatternServer/users/test/uploads/sub/a.txt </td>
<td> sub/a.txt </td>
</tr>
<tr>
<td> sub/x </td>
<td> a.txt </td>
<td> http://127.0.0.1:8080/gp/users/test/sub/x/a.txt </td>
<td> /Applications/GenePatternServer/users/test/uploads/sub/x/a.txt </td>
<td> sub/x/a.txt </td>
</tr>
<tr>
<td> sub/x </td>
<td> b.txt </td>
<td> http://127.0.0.1:8080/gp/users/test/sub/x/b.txt </td>
<td> /Applications/GenePatternServer/users/test/uploads/sub/x/b.txt </td>
<td> sub/x/b.txt </td>
</tr>
<tr>
<td> sub folder/with spaces </td>
<td> a.txt </td>
<td> http://127.0.0.1:8080/gp/users/test/sub%20folder/with%20spaces/a.txt </td>
<td> /Applications/GenePatternServer/users/test/uploads/sub folder/with spaces/a.txt </td>
<td> sub folder/with spaces/a.txt </td>
</tr>
</tbody></table>


<p>Some failing test cases</p>
<table><tbody>
<tr>
 <td> rule for </td>
 <td> UserUploadFile </td>
</tr>
<tr>
 <td> parentDir </td>
 <td> filename </td>
 <td> url? </td>
 <td> serverFile? </td>
 <td> relativeFile? </td>
</tr>
<tr>
 <td> </td>
 <td> all_aml_test.gct </td>
 <td> error </td>
 <td> error </td>
 <td> error </td>
</tr>
</tbody>
</table>

<table><tbody>
<tr>
<td> rule for </td>
<td> UserUploadFile </td>
</tr>
<tr>
<td> userId </td>
<td> parentDir </td>
<td> filename </td>
<td> url? </td>
<td> serverFile? </td>
<td> relativeFile? </td>
</tr>

<tr>
<td> "" </td>
<td> </td>
<td> all_aml_test.gct </td>
<td> org.genepattern.server.auth.AuthenticationException </td>
<td> error </td>
<td> error </td>
</tr>

<tr>
<td> </td>
<td> </td>
<td> all_aml_test.gct </td>
<td> error </td>
<td> error </td>
<td> error </td>
</tr>

<tr>
<td> test </td>
<td> / </td>
<td> all_aml_test.gct </td>
<td> error </td>
<td> error </td>
<td> error </td>
</tr>
<tr>
<td> test </td>
<td> /etc </td>
<td> hosts </td>
<td> error </td>
<td> error </td>
<td> error </td>
</tr>

<tr>
<td> Mr. S/ash </td>
<td> </td>
<td> all_aml_test.gct </td>
<td> error </td>
<td> error </td>
<td> error </td>
</tr>

</tbody></table>

<p>Tests for representing links to user upload directories.
<table><tbody>
<tr>
<td> rule for </td>
<td> UserUploadDir </td>
</tr>
<tr>
 <td> userId </td>
 <td> isDirectory? </td>
 <td> url? </td>
 <td> serverFile? </td>
 <td> relativeFile? </td>
</tr>
<tr>
 <td> test </td>
 <td> true </td>
 <td> http://127.0.0.1:8080/gp/users/test/ </td>
 <td> /Applications/GenePatternServer/users/test/uploads </td>
 <td> . </td>
</tr>

</tbody>
</table>


</body>
</html>
