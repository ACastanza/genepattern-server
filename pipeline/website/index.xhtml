<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>GenePattern Pipeline Editor</title>
		<link href="styles/jquery-ui.css" type="text/css" rel="stylesheet" />
		<link href="styles/pipelines.css" type="text/css" rel="stylesheet" />
		<script src="js/jquery-1.6.2.js" type="text/javascript" />
 		<script src="js/jquery-ui-1.8.16.js" type="text/javascript" />
 		<script src="js/jquery.jsPlumb-1.3.3-all.js" type="text/javascript" />
		<script src="js/jquery.tools.min.js" type="text/javascript" />
        <script src="js/jquery.iframe-post-form.js" type="text/javascript" />
		<script src="js/pipelines.js" type="text/javascript" />
	</head>
	<body onunload="jsPlumb.unload();">
		<div id="library">
			<label for="modulesDropdown" class="ui-autocomplete-input">Select Module: </label>
			<input id="modulesDropdown" />
			<button id="addModule" class="libraryModuleButton">Add</button>&#160;&#160;&#160;
            <span id="shortcutModules" />
		</div>
        <div id="titleBar">
            <span id="titleSpan"></span> <img id="pipelinePencil" src="images/pencil.gif" class="pencil" alt="Edit" />
            <div id="saveLoadDiv">
                <input id="loadInput" type="text" />
                <button id="loadButton" class="saveLoadButton">Load</button>
                <button id="saveButton" class="saveLoadButton">Save</button>
                <button id="revertButton" class="saveLoadButton">Revert</button>
            </div>
        </div>
		<div id="workspace"></div>
		<div id="properties">
            <div id="propertiesVersion"></div>
			<div id="propertiesTitle"></div>
            <div id="propertiesSubtitle"></div>
            <div id="propertiesInput" />
            <div id="propertiesSubmit"><button id="propertiesOk">OK</button><button id="propertiesCancel">Cancel</button></div>
		</div>
		<script type="text/javascript">			
			jsPlumb.ready(function() {
				editor.init();
				$.getJSON("/gp/PipelineDesigner/library", function(data) {
					library.init(data);
				});
				properties.init();
			});

            $("#loadButton").button();
            $("#loadButton").click(function() {
                var lsid = $("#loadInput").val();
                editor.load(lsid);
                $("#revertButton").button("enable");
            });

            $("#saveButton").button();
            $("#saveButton").click(function() {
                editor.save();
                $("#revertButton").button("enable");
            });

            $("#revertButton").button({disabled: true});
            $("#revertButton").click(function() {
                var lsid = editor.workspace["pipelineLsid"];
                editor.load(lsid);
            });
		</script>
	</body>
</html>
