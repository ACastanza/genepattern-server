<!--
  The Broad Institute
 SOFTWARE COPYRIGHT NOTICE AGREEMENT
 This software and its documentation are copyright (2003-2012) by the
 Broad Institute. All rights are reserved.

 This software is supplied without any warranty or guaranteed support
 whatsoever. The Broad Institute cannot be responsible for its
 use, misuse, or functionality.
!-->

<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

	<title>Create GenePattern Module</title>

	<link type="text/css" rel="stylesheet" href="styles/layout-default-latest.css" />
    <link  type="text/css" rel="stylesheet" media="screen" href="styles/jquery.multiselect.css" />
    <link href="#{facesContext.externalContext.requestContextPath}/css/#{systemMessageBean.skin}/jquery-ui-1.9.2.css" type="text/css" rel="stylesheet" />
    <link href="#{facesContext.externalContext.requestContextPath}/css/#{systemMessageBean.skin}/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" media="screen" />
    <link type="text/css" rel="stylesheet"  href="styles/header_style.css"  />
    <link type="text/css" rel="stylesheet"  href="../css/style.css"  />
    <link  type="text/css" rel="stylesheet" media="screen" href="styles/creator.css" />
    <link href="../skin/favicon.ico" rel="shortcut icon" />

    <script src="/gp/js/jquery/jquery-1.8.3.js" type="text/javascript" />
    <script src="/gp/js/jquery/jquery-ui-1.9.2.js" type="text/javascript" />
	<script type="text/javascript" src="/gp/js/jquery/jquery.layout-1.3.0.js"></script>
    <script type="text/javascript" src="js/creator.js"></script>
    <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.multiselect.js"></script>

   <script type="text/javascript" language="javascript">
        var contextRoot = '#{facesContext.externalContext.requestContextPath}';
        var createTaskAllowed = #{authorizationBean.createModuleAllowed};
        var createPublicPipelineAllowed = #{authorizationBean.createPublicPipelineAllowed};
        var createPrivatePipelineAllowed = #{authorizationBean.createPrivatePipelineAllowed};
        var createPublicSuiteAllowed = #{authorizationBean.createPublicSuiteAllowed};
        var createPrivateSuiteAllowed = #{authorizationBean.createPrivateSuiteAllowed};
        var genomeSpaceLoggedIn = #{genomeSpaceBean.loggedIn};

        function showCorrectGSLink() {
            if (genomeSpaceLoggedIn) {
                MM_showMenu(window.mm_menu_genomespaceloggedin,x,y,null,'link24;');
            }
            else {
                MM_showMenu(window.mm_menu_genomespace,x,y,null,'link24');
            }
        }
        
        $(document).ready(function () {
        	$("body").tooltip();
        });
    </script>
    <script type="text/javascript" src="/gp/js/genepattern.js"/>
    <script type="text/javascript" src="/gp/js/mm_menu.js"/>
    <script type="text/javascript" src="/gp/js/mainMenu.js"/>

    <!--[if IE]>
        <script type="text/javascript" language="javascript">
			alert("The new Module Integrator doesn't support Internet Explorer.  Please use either Firefox, Chrome or Safari.");
        </script>
    <![endif]-->
</head>
<body>
<script language="JavaScript1.2" type="text/javascript">
    var agt = navigator.userAgent.toLowerCase();
    var isSafari2 = agt.indexOf("safari/4") != -1;
    var x = isSafari2 ? -10 : 0;
    var y =  isSafari2 ? 8 : 18;
    mmLoadMenus();
</script>


<!--<div id="content" class="content"> -->

    <!-- Footer -->
    <div class="ui-layout-south">
        <a href="/gp/pages/about.jsf">About GenePattern</a>&#160;|&#160;<a href="/gp/pages/contactUs.jsf">Contact Us</a>&#160;|&#160;
        &copy;2003-2012&#160;<a href="http://www.broadinstitute.org" target="_blank">Broad Institute, MIT</a>
        <a href="http://www.broadinstitute.org" target="_blank"><img src="styles/images/broad_logo.jpg" width="63" height="18" alt="Broad institute" />
        </a>
    </div>

    <!-- Main content body -->
    <div class="ui-layout-north">
        <!-- User settings area -->
        <div id="systemMessageLink">
            <table border="0" cellpadding="0" cellspacing="0" class="loginsettings">
                <tr valign="top">
                    <td>
                        <div style="display: inline;">
                            <a href="#{facesContext.externalContext.requestContextPath}/pages/accountInfo.jsf">My Settings</a>                          |
                             <a href="#{facesContext.externalContext.request.contextPath}/logout">Sign Out</a>
                             &#160;${requestScope.userID}&#160;&#160;&#160;
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <!-- top band with the logo -->
        <div id="topband" class="modtopband">
            <a href="/gp/pages/index.jsf" target="_top">
                <img src="/gp/images/GP-logo.gif" alt="GenePattern" height="48" style="border: 0;" width="229" />
            </a>
        </div>

        <!-- horizontal navigation band -->
        <div id="modnavband1" class="modnavband1" style="white-space: nowrap;">
            <a name="link17" id="link6" href="/gp/pages/index.jsf" onclick="MM_showMenu(window.mm_menu_tasks,x,y,null,'link17')" onmouseover="MM_showMenu(window.mm_menu_tasks,x,y,null,'link17')" onmouseout="MM_startTimeout();">Modules &amp; Pipelines</a> &#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link14" id="link9" href="/gp/pages/manageSuite.jsf" onclick="MM_showMenu(window.mm_menu_suites,x,y,null,'link14')" onmouseover="MM_showMenu(window.mm_menu_suites,x,y,null,'link14')" onmouseout="MM_startTimeout();">Suites</a> &#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link15" id="link10" href="/gp/jobResults" onclick="MM_showMenu(window.mm_menu_jobResults,x,y,null,'link15')" onmouseover="MM_showMenu(window.mm_menu_jobResults,x,y,null,'link15')" onmouseout="MM_startTimeout();">Job Results</a> &#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link12" id="link3" href="/gp/pages/index.jsf?splash=resources" onclick="MM_showMenu(window.mm_menu_resources,x,y,null,'link12')" onmouseover="MM_showMenu(window.mm_menu_resources,x,y,null,'link12')" onmouseout="MM_startTimeout();">Resources</a> &#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link2" id="link5" href="/gp/pages/index.jsf?splash=downloads" onclick="MM_showMenu(window.mm_menu_downloads,x,y,null,'link2')" onmouseover="MM_showMenu(window.mm_menu_downloads,x,y,null,'link2')" onmouseout="MM_startTimeout();">Downloads</a> &#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link13" id="link4" href="/gp/pages/serverSettings.jsf" onclick="MM_showMenu(window.mm_menu_administration,x,y,null,'link13')" onmouseover="MM_showMenu(window.mm_menu_administration,x,y,null,'link13')" onmouseout="MM_startTimeout();">Administration</a>&#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link11" id="link1" href="/gp/pages/index.jsf" onclick="MM_showMenu(window.mm_menu_documentation,x,y,null,'link11')" onmouseover="MM_showMenu(window.mm_menu_documentation,x,y,null,'link11')" onmouseout="MM_startTimeout();">Help</a>&#160;&#160;&#160;&#160;&#160;&#160;
            <a name="link24" id="link24" href="/gp/pages/index.jsf" onclick="showCorrectGSLink()" onmouseover="showCorrectGSLink()" onmouseout="MM_startTimeout();">
                <img style="vertical-align:middle" alt="GenomeSpace" src="/gp/pages/genomespace/genomespace_icon.gif" height="14px" width="14px" border="0" />&#160;GenomeSpace
            </a>
        </div>
        <div id="modheader">
            <span>
                Name*: <input type="text" id="modtitle" name="title" size="50"/>
                <a href='createhelp.jsp#Name' target='help'>
                    <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                </a>
            </span>
            <span>
                version
                <select name="modversion">
                    <option value="unversioned">unversioned</option>
                </select>
            </span>
            <div id="gparcControls">
             	<button id="publishGParc"><img src="/gp/images/gparc.png" width="16" height="16" alt="Submit to GParc" class="buttonIcon" />Submit to GParc</button>
            	<br /><a id="whatIsGparc" href="#" title="GParc is a repository and community where users can share and discuss their own GenePattern modules.">What is GParc?</a>
            </div>
            <span id="modcontrols">
                <button id="helpbtn"><img src="styles/images/help.gif" width="16" height="16" alt="help" class="buttonIcon"/>Help</button>
                <button id="savebtn"><img src="styles/images/save.gif" width="16" height="16" alt="save" class="buttonIcon" />Save</button>
                <button id="saveRunbtn"><img src="styles/images/save_run.gif" width="16" height="16" alt="save and run" class="buttonIcon" />Save &amp; Run</button> 
            </span>
        </div>
   </div>
    <div class="ui-layout-center">
        <p class="heading">Details</p>
        <div class ="hcontent">
            <table border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td id="lsid" colspan="3">

                    </td>
                </tr>
                <tr>
                    <td>
                        Description:
                    </td>
                    <td colspan="3">
                        <textarea class="det_textarea" cols="1" rows="2" name="description"></textarea>
                        <a href='createhelp.jsp#Description' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        Author:
                    </td>
                    <td colspan="3">
                        <input type="text" name="author" size="70"/>
                        <a href='createhelp.jsp#Author' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        Organization:
                    </td>
                    <td colspan="3">
                         <input type="text" name="organization" size="70"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        License (Text Format Only):
                    </td>
                    <td colspan="3">
                        <div id="mainLicenseDiv">
                            <div id="licenseDiv">
                                <span class="btn btn-success fileinput-button">
                                    <span><i class="icon-plus"></i><img src="styles/images/file_add.gif" width="16" height="16" alt="help" class="helpbutton" />Add License File</span>
                                    <input  name="licensefile" type="file" class="licensefile"/>
                                </span>
                            </div>
                        </div>
                        <a href='createhelp.jsp#License' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        Version Comment:
                    </td>
                    <td colspan="3">
                        <input type="text" name="comment" size="100"/>
                        <a href='createhelp.jsp#VersionComment' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        Module Category:
                    </td>
                    <td colspan="3">
                        <table class="no-border">
                            <tr>
                                <td>
                                    <select name="category">
                                        <option value=""> Uncategorized</option>
                                    </select>
                                </td>
                                <td>
                                    <button id="addcategory">New</button>
                                    <a href='createhelp.jsp#TaskType' target='help'>
                                        <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                                    </a>
                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>
                <tr>
                    <td>
                         Privacy:
                    </td>
                    <td>
                        <select name="privacy">
                            <option value="private">private</option>
                            <option value="public">public</option>
                        </select>
                        <a href='createhelp.jsp#Privacy' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                    <td>
                         Quality Level:
                    </td>
                    <td>
                        <select name="quality">
                            <option value="development">development</option>
                            <option value="preproduction">preproduction</option>
                            <option value="production">production</option>
                        </select>
                        <a href='createhelp.jsp#Quality' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        CPU type:
                    </td>
                    <td>
                        <select name="cpu">
                            <option value="any">any</option>
                            <option value="Alpha">Alpha</option>
                            <option value="Intel">Intel</option>
                            <option value="PowerPC">PowerPC</option>
                            <option value="Sparc">Sparc</option>
                        </select>
                        <a href='createhelp.jsp#cpu' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                    <td>
                        Operating System:
                    </td>
                    <td>
                        <input type="radio" name="os" value="any" id="os" checked="checked"/>
                        <label for="os">Any</label>

                        <input type="radio" name="os" value="linux" id="os1"/>
                        <label for="os1">Linux</label>

                        <input type="radio" name="os" value="mac" id="os2"/>
                        <label for="os2">MacOS</label>

                        <input type="radio" name="os" value="windows" id="os3"/>
                        <label for="os3">Windows</label>

                        <a href='createhelp.jsp#os' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        Language:
                    </td>
                    <td>
                        <select name="language">
                            <option value="any">any</option>
                            <option value="C">C</option>
                            <option value="C++">C++</option>
                            <option value="Java">Java</option>
                            <option value="MATLAB">MATLAB</option>
                            <option value="Perl">Perl</option>
                            <option value="Python">Python</option>
                            <option value="R">R</option>
                        </select>
                        <a href='createhelp.jsp#Language' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                    <td>
                        <b> min. language version: </b>
                    </td>
                    <td>
                        <input type="text" name="lang_version" size="20"/>
                        <a href='createhelp.jsp#MinLanguage' target='help'>
                            <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        Output File Formats:</td>
                    <td>
                        <table class="no-border">
                            <tr>
                                <td colspan="3">
                     	            <select multiple="multiple" name="mod_fileformat"></select>
                                </td>
                                <td>
                                    <button id="addfileformat">New</button>
                                    <a href='createhelp.jsp#OutputDescription' target='help'>
                                        <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>

        <p class="heading">Support Files</p>
        <div  class="hcontent" id="supportfilecontent">
            <div class="row fileupload-buttonbar">
                <div>
                    <!-- The fileinput-button span is used to style the file input field as button -->
                    <span class="btn btn-success fileinput-button">
                        <span><i class="icon-plus"></i><img src="styles/images/file_add.gif" width="16" height="16" alt="help" class="helpbutton" />Add files...</span>
                        <input name="supportfile" type="file" class="supportfile"/>
                    </span>
                    <a href='createhelp.jsp#SupportFiles' target='help'>
                        <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                    </a>
                </div>
            </div>
            <div class="clear"></div>
            <div id="dropbox"><span id="droplabel">Drop files here...</span>
            </div>
            <div id="uploadcontent">
                <ul id="supportfileslist">
                </ul>
            </div>

        </div>

        <p class="heading">Command Line</p>
        <div class="hcontent">
            <span id="commandtype">
            <table class="commandtype_table">
                <tr>
                    <td>
                        Type:
                    </td>
                    <td>
                        <select name="c_type">
                            <option value="Custom">Custom</option>
                            <option value="Java">Java</option>
                            <option value="Perl">Perl</option>
                        </select>
                    </td>
                    <td>
                        <button id="viewparameter">
                            <img src="styles/images/open.gif" width="16" height="16" alt="help" class="buttonIcon" />View Argument List</button>
                    </td>
                </tr>
            </table>
            </span>
            <div id="commandinfo">
                <div id='commandtextarea'>
                    <textarea rows='2' cols ='1' name='cmdtext'></textarea>
                    <a href='createhelp.jsp#Command' target='help'>
                        <img src="styles/images/help_small.gif" width="14" height="14" alt="help" class="buttonIcon" />
                    </a>
                </div>
            </div>
            <div class="clear"></div>
            <p>
                <b>NOTE:</b> Please make any changes to the parameters and their flags in the Parameters section only.
            </p>
        </div>

        <p class="heading">Parameters</p>
        <div class="hcontent">
            <div class="pcontrols">
                <span class="addcontrols" >
                    <input type='text' id='addparamnum' size='7'/>
                    <button id="addmultiple">Add Parameter</button>
                </span>
                <a href='createhelp.jsp#inputParameters' target='help'>
                    <img src="styles/images/help_small.gif" width="12" height="12" alt="help" class="helpbutton" />
                </a>
            </div>
            <div id="parameters"></div>
        </div>
    </div>
<!--</div> -->

<!-- dialogs -->

<div style="display:none;" id="editchoicedialog" title="Edit Choice List" class="dialog">
    <div>
        <button id="choiceadd">Add Choice</button>
    </div>
</div>

<div id="addmodcategorydialog" title="Add Module Category" class="dialog">
    <h6> Enter new module category:  </h6>
    <input type="text" id="newcategoryname"/>
</div>

<div id="addfileformatdialog" title="Add Output File Format" class="dialog">
    <h6>Enter new output file format: </h6>
    <input type="text" id="newfileformat"/>
</div>

<div id="clistdialog" title="Command-line Argument List">
    <p>Click and drag a parameter to reorder</p>
    <ol id="commandlist"></ol>
</div>


<div id="savingDialog">
    <div id="progressbar"></div>
</div>
<div id="savedDialog"/>

</body>
</html>