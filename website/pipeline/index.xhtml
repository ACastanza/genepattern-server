<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>GenePattern Pipeline Editor</title>
        <!-- Normal GenePattern links -->
        <link href="/gp/css/style.css" rel="stylesheet" type="text/css" />
        <link href="/gp/skin/favicon.ico" rel="shortcut icon" />

		<link href="styles/jquery-ui.css" type="text/css" rel="stylesheet" />
		<link href="styles/pipelines.css" type="text/css" rel="stylesheet" />
		<script src="js/jquery-1.7.1.js" type="text/javascript" />
 		<script src="js/jquery-ui-1.8.16.js" type="text/javascript" />
 		<script src="js/jquery.jsPlumb-1.3.5-all.js" type="text/javascript" />
		<script src="js/jquery.tools.min.js" type="text/javascript" />
        <script src="js/jquery.iframe-post-form.js" type="text/javascript" />
		<script src="js/pipelines.js" type="text/javascript" />
	</head>
	<body onunload="jsPlumb.unload();">
        <!-- top band with the logo -->
        <div id="topband" class="topband">
            <a href="/gp/pages/index.jsf" target="_top">
                <img src="/gp/images/GP-logo.gif" alt="GenePattern" height="48" style="border: 0;" width="229" />
            </a>
        </div>
        <div id="titleBar">
            <span id="titleSpan"></span> <img id="pipelinePencil" src="images/pencil.gif" class="pencil" alt="Edit" />
            <div id="saveLoadDiv">
                <button id="loadButton" class="saveLoadButton">Load Pipeline</button>
                <button id="saveButton" class="saveLoadButton">Save</button>
                <button id="revertButton" class="saveLoadButton">Revert</button>
            </div>
        </div>

        <!-- horizontal navigation band
        <div id="navband1" class="navband1" style="white-space: nowrap;">
            <a name="link17" id="link6" href="/gp/pages/index.jsf" onclick="MM_showMenu(window.mm_menu_tasks,x,y,null,'link17')" onmouseover="MM_showMenu(window.mm_menu_tasks,x,y,null,'link17')" onmouseout="MM_startTimeout();">Modules &amp; Pipelines</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link14" id="link9" href="/gp/pages/manageSuite.jsf" onclick="MM_showMenu(window.mm_menu_suites,x,y,null,'link14')" onmouseover="MM_showMenu(window.mm_menu_suites,x,y,null,'link14')" onmouseout="MM_startTimeout();">Suites</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link15" id="link10" href="/gp/jobResults" onclick="MM_showMenu(window.mm_menu_jobResults,x,y,null,'link15')" onmouseover="MM_showMenu(window.mm_menu_jobResults,x,y,null,'link15')" onmouseout="MM_startTimeout();">Job Results</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link12" id="link3" href="/gp/pages/index.jsf?splash=resources" onclick="MM_showMenu(window.mm_menu_resources,x,y,null,'link12')" onmouseover="MM_showMenu(window.mm_menu_resources,x,y,null,'link12')" onmouseout="MM_startTimeout();">Resources</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link2" id="link5" href="/gp/pages/index.jsf?splash=downloads" onclick="MM_showMenu(window.mm_menu_downloads,x,y,null,'link2')" onmouseover="MM_showMenu(window.mm_menu_downloads,x,y,null,'link2')" onmouseout="MM_startTimeout();">Downloads</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link13" id="link4" href="/gp/pages/serverSettings.jsf" onclick="MM_showMenu(window.mm_menu_administration,x,y,null,'link13')" onmouseover="MM_showMenu(window.mm_menu_administration,x,y,null,'link13')" onmouseout="MM_startTimeout();">Administration</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link11" id="link1" href="/gp/pages/index.jsf" onclick="MM_showMenu(window.mm_menu_documentation,x,y,null,'link11')" onmouseover="MM_showMenu(window.mm_menu_documentation,x,y,null,'link11')" onmouseout="MM_startTimeout();">Help</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="link24" id="link24" href="/gp/pages/index.jsf" onclick="MM_showMenu(window.mm_menu_genomespaceloggedin,x,y,null,'link24')" onmouseover="MM_showMenu(window.mm_menu_genomespaceloggedin,x,y,null,'link24')" onmouseout="MM_startTimeout();"><img style="vertical-align:middle" src="/gp/pages/genomespace/genomespace_icon.gif" height="14px" width="14px" border="0" />&nbsp;GenomeSpace</a>
        </div> -->

        <!--  Main content area -->
        <div id="content" class="content">
            <!-- Main content body -->
            <div id="library">
                <label for="modulesDropdown" class="ui-autocomplete-input">Select Module: </label>
                <br />
                <input id="modulesDropdown" size="15" />
                <button id="addModule" class="libraryModuleButton">Add</button>&#160;&#160;&#160;
                <span id="shortcutModules" />
                <div id="categoryModules" />
            </div>
            <div id="workspace"></div>

            <!-- Footer
            <div id="footer">
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td colspan="4" class="footer">
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td>
                                        <a href="/gp/pages/about.jsf">About GenePattern</a>&nbsp;|&nbsp;<a href="/gp/pages/contactUs.jsf">Contact Us</a>
                                    </td>
                                    <td>
                                        <div align="right">
                                            &copy;2003-2012&nbsp;<a href="http://www.broadinstitute.org" target="_blank">Broad Institute, MIT</a>
                                        </div>
                                    </td>
                                    <td width="10">&nbsp;</td>
                                    <td width="27">
                                        <a href="http://www.broadinstitute.org" target="_blank">
                                            <img src="/gp/images/broad-symbol.gif" alt="Broad Institute" height="30" style="border: 0;" width="27"/>
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div> -->
        </div>

        <div id="loadPipelineDialog">
            <div id="loadPipelineHeader" >Choose Pipeline to Load</div>
            <div id="pipelineLoadList">
                <ol id="pipelineSelectList" />
            </div>
            <div id="loadPipelineButtons">
                <button id="loadPipeline" class="saveLoadButton">Load</button>
                <button id="cancelPipeline" class="saveLoadButton">Cancel</button>
            </div>
        </div>
		<div id="properties">
            <div id="propertiesVersion"></div>
			<div id="propertiesTitle"></div>
            <div id="propertiesSubtitle"></div>
            <div id="propertiesInput" />
            <div id="propertiesSubmit"><button id="propertiesOk">OK</button><button id="propertiesCancel">Cancel</button></div>
		</div>
		<script type="text/javascript">
			jsPlumb.ready(function() {
				editor.init();
				$.getJSON("/gp/PipelineDesigner/library", function(data) {
					library.init(data);
                    editor.loadPipelineIfAsked();
				});
				properties.init();
			});

            $("#loadPipelineDialog").dialog({
                autoOpen: false,
                modal: true,
                width: 400,
                title: "Choose Pipeline to Load"
            });

            $("#loadButton").button();
            $("#loadButton").click(function() {
                library.displayLoadDialog();
                $("#revertButton").button("enable");
            });

            $("#saveButton").button();
            $("#saveButton").click(function() {
                editor.save();
                $("#revertButton").button("enable");
            });

            $("#revertButton").button({disabled: true});
            $("#revertButton").click(function() {
                var lsid = editor.workspace["pipelineLsid"];
                editor.load(lsid);
            });
		</script>
	</body>
</html>
