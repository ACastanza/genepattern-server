<!DOCTYPE html PUBLIC "-/W3C/DTD XHTML 1.0 Transitional/EN" "http:/www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:t="http://myfaces.apache.org/tomahawk" 
      xmlns:c="http://java.sun.com/jstl/core">
    
<ui:composition>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td colspan="5" class="sidebarhead-bkg2">
        <div class="sidebarhead">Recent Jobs</div>
      </td>
    </tr>
    <tr>
      <td height="6" colspan="5">
        <t:graphicImage value="/images/spacer.gif" width="1" height="6"/>
      </td>
    </tr>
    <c:if test="#{recentJobsBean.size == 0}">
      <tr>
        <td>No jobs to display</td>
      </tr>
    </c:if>
    <h:form>
    
      <!-- Loop through jobs -->
      <t:dataList var="job" value="#{recentJobsBean.jobs}" rowIndexVar="jobIndex">
        <tr>
          <td width="9">
            <img src="#{facesContext.externalContext.requestContextPath}/images/spacer.gif" width="9" height="1"/>
          </td>
          <td valign="top" class="recentjobs-sh">
            <a href="link">#{job.jobNumber}</a>
          </td>
          <td width="9">
            <img src="images/spacer.gif" width="9" height="1"/>
          </td>
          <td>
            <font class="recentjobs-sh">#{job.taskName}</font>
            <ui:include src="jobsMenu.xhtml">
              <ui:param name="job" value="#{job}"/>
              <ui:param name="jobComplete" value="#{job.complete}"/>
            </ui:include>
            
            <h:outputText value="#{job.dateCompleted}">
              <f:convertDateTime pattern="MMM dd hh:mm:ss a"/>
            </h:outputText>
            <br/>
            
            <!--  Loop through output files -->
            <t:dataList var="p" value="#{job.outputFileParameterInfos}" rowIndexVar="paramIndex">
              <h:outputLink value="#{facesContext.externalContext.requestContextPath}/retrieveResults.jsp">#{p.name}
                <f:param name="job" value="#{job.jobNumber}"/>
                <f:param name="filename" value="#{p.name}"/>
              </h:outputLink>
              
              <ui:include src="jobFileMenu.xhtml">
                <ui:param name="job" value="#{job}"/>
                <ui:param name="param" value="#{p}"/>
              </ui:include>
              
            </t:dataList>
          </td>
          <td width="9">
            <img src="#{facesContext.externalContext.requestContextPath}/images/spacer.gif" width="9" height="1"/>
          </td>
        </tr>
        <tr>
          <td colspan="5">
            <img src="#{facesContext.externalContext.requestContextPath}/images/divider-pix2.gif" width="100%" height="1" vspace="5"/>
          </td>
        </tr>
      </t:dataList>
    </h:form>
    <tr>
      <td colspan="5">
        <t:graphicImage value="/images/divider-pix2.gif" width="100%" height="1" vspace="5"/>
      </td>
    </tr>
  </table>
  <p>
    <br/>
  </p>
  <p>
    <br/>
  </p>
  <p>&nbsp;</p>
  <p>
    <br/>
  </p>
  <p>
    <br/>
  </p>
  </ui:composition>
</html>
