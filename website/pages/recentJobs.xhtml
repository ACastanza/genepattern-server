<!DOCTYPE html PUBLIC "-/W3C/DTD XHTML 1.0 Transitional/EN" "http:/www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jstl/core">

<table width="100%" border="0" cellspacing="0" cellpadding="0">
	<tr>
		<td colspan="5" class="sidebarhead-bkg2">
		<div class="sidebarhead">Recent Jobs</div>
		</td>
	</tr>
	<tr>
		<td height="6" colspan="5"><t:graphicImage
			value="/images/spacer.gif" width="1" height="6" /></td>
	</tr>

	<c:if test="#{recentJobsBean.size == 0}">
		<tr>
			<td>No jobs to display</td>
		</tr>
	</c:if>

	<t:dataList var="job" value="#{recentJobsBean.jobs}">
		<tr>
			<td width="9"><t:graphicImage value="/images/spacer.gif"
				width="9" height="1" /></td>
			<td valign="top" class="recentjobs-sh"><a>#{job.jobNumber}</a></td>
			<td width="9"><t:graphicImage value="/images/spacer.gif"
				width="9" height="1" /></td>
			<td><font class="recentjobs-sh">#{job.taskName}</font> <t:jscookMenu
				layout="hbr" theme="ThemePanel"
				org.apache.myfaces.STYLE_LOCATION="/css/jscookmenu"
				style="display: inline;">

				<t:navigationMenuItem icon="/images/menuicon-1.gif">
					<t:navigationMenuItem itemLabel="Reload"
						actionListener="#{recentJobsBean.reload}"
						itemValue="#{job.jobNumber}" action="run task" />
					<t:navigationMenuItem itemLabel="Delete"
						actionListener="#{recentJobsBean.delete}"
						itemValue="#{job.jobNumber}" action="delete" />

					<t:navigationMenuItem itemLabel="Terminate"
						actionListener="#{recentJobsBean.terminateJob}"
						itemValue="#{job.jobNumber}" action="terminate"
						disabled="#{job.complete}" />

					<t:navigationMenuItem itemLabel="View Code">
						<t:navigationMenuItem itemLabel="Java"
							actionListener="#{recentJobsBean.viewCode}"
							itemValue="#{job.jobNumber}" />
						<t:navigationMenuItem itemLabel="MATLAB"
							actionListener="#{recentJobsBean.viewCode}"
							itemValue="#{job.jobNumber}" />
						<t:navigationMenuItem itemLabel="R"
							actionListener="#{recentJobsBean.viewCode}"
							itemValue="#{job.jobNumber}" />
					</t:navigationMenuItem>
				</t:navigationMenuItem>
			</t:jscookMenu> <br />
			<h:outputText value="#{job.dateCompleted}">
				<f:convertDateTime type="date" pattern="EEE, MMM d, ''yy h:mm a" />
			</h:outputText> <br />
			<t:dataList var="p" value="#{job.outputFileParameterInfos}">
				<h:outputLink value="retrieveResults.jsp">#{p.name}
							<f:param name="job" value="#{job.jobNumber}" />
					<f:param name="filename" value="#{p.name}" />
				</h:outputLink>
				<t:jscookMenu layout="hbr" theme="ThemePanel"
					org.apache.myfaces.STYLE_LOCATION="/css/jscookmenu">
					<t:navigationMenuItem icon="/images/menuicon-1.gif">
						<t:navigationMenuItem itemLabel="Delete"
							actionListener="#{recentJobsBean.deleteFile}"
							itemValue="#{job.jobNumber}/#{p.value}" action="delete file" />
						<t:navigationMenuItem itemLabel="Save"
							actionListener="#{recentJobsBean.saveFile}"
							itemValue="#{job.jobNumber}/#{p.name}" action="save file" />
						<t:navigationMenuItem itemLabel="Create Pipeline"
							actionListener="#{recentJobsBean.createPipeline}"
							itemValue="#{job.jobNumber}" action="create pipeline" />
						<t:navigationMenuItem itemLabel="Modules">
							<t:navigationMenuItems value="#{p.moduleMenuItems}" />
						</t:navigationMenuItem>
					</t:navigationMenuItem>
				</t:jscookMenu>
				<br />

			</t:dataList></td>
			<td width="9"><t:graphicImage value="/images/spacer.gif"
				width="9" height="1" /></td>
		</tr>
	</t:dataList>


	<tr>
		<td colspan="5"><t:graphicImage value="/images/divider-pix2.gif"
			width="100%" height="1" vspace="5" /></td>
	</tr>
</table>

<p><br />
</p>
<p><br />
</p>
<p>&nbsp;</p>
<p><br />
</p>
<p><br />
</p>
</html>
