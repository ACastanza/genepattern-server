<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jstl/core">

<ui:composition template="/templates/common.xhtml">
	<ui:define name="headText">
		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/prototype.js"></script>

		<script type="text/javascript" language="javascript">

/* <![CDATA[ */
	function toggle(maincheckbox, theForm) {		
		var isChecked = maincheckbox.checked;
		var elements = Form.getInputs(theForm , 'checkbox');	
		for (i = 0; i < elements.length; i++) {			
			elements[i].checked = isChecked;
			
		}
	}
	
/* ]]> */
	</script>
	</ui:define>
	<ui:define name="pageTitle">GenePattern - Install/Update Tasks</ui:define>


	<ui:define name="body">

		<table width="100%" border="0" cellpadding="0" cellspacing="0"
			class="barhead-other">
			<tr>
				<td>Install/Update Tasks</td>
			</tr>
		</table>
		<p></p>
		<c:choose>
			<c:when test="#{taskCatalogBean.error}">
				<p>Sorry, the module repository is not currently available.</p>
				<p>If you use a web proxy to connect to the internet, please
				ensure your <a href="adminServer.jsp">web proxy settings</a> are
				correct</p>
			</c:when>
			<c:otherwise>
		<table width="100%" border="0" cellpadding="10" cellspacing="0">
					<tr valign="top">
						<td colspan="2">Filter tasks by:</td>
					</tr>
					<tr valign="top">
						<td><h:form id="filterForm">
							<table>
								<tr>
									<td></td>
									<td valign='top'><b>state</b><br />

									<h:selectManyListbox
										value="#{taskCatalogBean.statesSelectedValues}" name="state"
										forceid="true" id="state">
										<f:selectItems value="#{taskCatalogBean.states}" />
									</h:selectManyListbox></td>
									<td valign='top'><b>OS</b><br />
									<h:selectManyListbox
										value="#{taskCatalogBean.operatingSystemsSelectedValues}"
										name="os" id="os">
										<f:selectItems value="#{taskCatalogBean.operatingSystems}" />
									</h:selectManyListbox></td>
								</tr>
							</table>
							<tr>
								<td><h:commandButton
									action="#{taskCatalogBean.updateFilters}" value="Refresh" /></td>
							</tr>
						</h:form></td>
					</tr>
				</table>
				<p class="recentjobs-sh">&nbsp;</p>

				<table width="100%" border="0" cellpadding="0" cellspacing="0"
					class="barhead-task">
					<!--  <tr>
						<td class="barhead-version">#{taskCatalogBean.numberOfTasks}
						tasks</td>
					</tr>
					 -->
				</table>
				<h:form id="installForm">

					<!--   <p><input type="submit" name="install" value="install checked" /></p> -->
					<p><h:commandButton action="#{taskCatalogBean.installTasks}"
						value="install checked" /></p>
					<table cellpadding="5" cellspacing="0" class="smalltype">

						<tr class="tableheader-row">
							<td valign="top"><input type="checkbox" name="ALL"
								value="ALL" checked="checked"
								onclick="toggle(this, 'installForm');" /></td>
							<td valign="top"><b>name (version)</b></td>
							<td valign="top"><b>task type</b></td>
							<td valign="top"><b>details</b></td>
						</tr>
						<c:forEach items="#{taskCatalogBean.tasks}" var="t">

							<tr>
								<td rowspan="2" valign="top"><input type="checkbox"
									value="lsid_version" checked="checked" /></td>

								<td valign="top" height="1"><span class="tasks-broad">
								<a name="#{t.lsid}" id="#{t.lsid}"></a> <b><nobr>#{t.name}</nobr></b></span> (#{t.lsidVersion})</td>

								<td valign="top" height="1"><nobr>#{t.taskType}</nobr></td>
								<td valign="top" colspan="4" rowspan="2">
								<table>

									<tr>
										<td valign="top" align="right">author:</td>
										<td valign="top"><nobr>#{t.author}</nobr></td>
									</tr>

									<tr>

										<td valign="top" align="right">quality:</td>
										<td valign="top">#{t.quality}</td>

									</tr>

									<tr>
										<td valign="top" align="right">requirements:</td>
										<td valign="top"><nobr>#{t.requirements}</nobr></td>

									</tr>
								</table>
								</td>
							</tr>

							<tr>
								<td valign="top" colspan="2"><b>#{t.description}</b> <br />
								<c:if test="#{!empty t.versionComment}">
									<span class="tasks-broad"><b>version notes:
									#{t.versionComment}</b></span>
									<br />
								</c:if> <a href="#{t.documentationUrl}" target="_new">documentation</a>&#160;|&#160;<a
									href="#{t.url}">download zip</a></td>
							</tr>
							<tr class="settingperameter">
								<td colspan="4"></td>
							</tr>
						</c:forEach>

					</table>
				</h:form>

			</c:otherwise>
		</c:choose>

	</ui:define>


</ui:composition>
</html>
