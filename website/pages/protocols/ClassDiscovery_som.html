<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"/>
<title>SOM Clustering</title>
	<link href="../../css/protocolsWindow.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../js/protocol.js"></script>
</head>

<body>

<h1>SOM Clustering</h1>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td align="left">
      <a href="protocols.html">protocols</a>
    </td>
  </tr>
</table>

<p>
Specify the number of clusters to be identified and whether to cluster genes and/or samples. Self-organizing maps (SOMs) use an iterative process to identify an optimal set of cluster centroids and to cluster the data around them.  </p>
<div class="steps">
<h2>Before you begin</h2>
<p>Gene expression data must be in a <a href="GctResFiles.html">GCT or RES file</a>. 
<br />
Example file: <a href="ftp://ftp.broadinstitute.org/pub/genepattern/datasets/all_aml/all_aml_test.gct">all_aml_test.gct</a>.</p>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td align="right">learn more:<br />
    <a href="http://www.broadinstitute.org/cancer/software/genepattern/tutorial/gp_fileformats.html#gct">file formats</a>
    </td>
  </tr>
</table>
</div>
<div class="steps">
  <h2>Step 1: PreprocessDataset</h2>
  <p>Preprocess gene expression data 
      to remove platform noise and genes that have little variation.
Although researchers generally preprocess data before clustering if doing so removes relevant biological information, skip this step. </p>
  <div class="gpLinks">
  <ul>
    <li><a href="/gp/pages/index.jsf?lsid=PreprocessDataset" 
           onclick="return openModuleWindow(this, event);"
        >Open module</a> in the GenePattern window.</li>
    <li><a href="/gp/pages/index.jsf?lsid=PreprocessDataset&input.filename=ftp://ftp.broadinstitute.org/pub/genepattern/datasets/all_aml/all_aml_test.gct" 
           onclick="return openModuleWindow(this, event);"
        >Open module with example data</a> in the GenePattern window.</li>
  </ul>
  </div>
    <h5>Considerations</h5>
  <ul>
    <li>PreprocessDataset can preprocess the data in one or more ways (in this order):
  <ol>
    <li>Set threshold and ceiling values. Any value lower/higer than the threshold/ceiling
      value is reset to the threshold/ceiling value. </li>
    <li>Convert each expression value to the log base 2 of the value. </li>
    <li>Remove genes (rows) if a given number of its sample values are less than
      a given threshold. </li>
    <li>Remove genes (rows) that do not have a minimum fold change or expression
      variation. </li>
    <li>Discretize or normalize the data. </li>
  </ol></li>
    <li>When using ratios to compare gene expression between samples, 
      convert values to log base 2 of the value to
      bring up- and down-regulated genes to the same scale. 
      For example, ratios of 2 and .5 indicating two-fold changes for up- and
      down-regulated expression, respectively, are converted to +1 and -1. </li>
    <li>If you did not generate the expression data, 
      check whether preprocessing steps have already been taken before 
      running the PreprocessDataset module. </li>
  </ul>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td align="right">learn more:<br />
    <a href="/gp/getTaskDoc.jsp?name=PreprocessDataset">PreprocessDataset</a>
    </td>
  </tr>
</table>
</div>


<div class="steps">
  <h2>Step 2: SOMClustering</h2>

  <p>Run SOM clustering to partition genes or samples into a specified number of clusters. Specify a range to construct self-organizing maps (SOMs) for multiple sets of clusters. For example, a range of 2-3 (the default) partitions the data into two clusters and three clusters. 
  </p>
  
  <div class="gpLinks">
  <ul>
    <li><a href="/gp/pages/index.jsf?lsid=SOMClustering"
           onclick="return openModuleWindow(this, event);"
        >Open SOMClustering</a></li>
    <li><a href="/gp/pages/index.jsf?lsid=SOMClustering&dataset.filename=ftp://ftp.broadinstitute.org/pub/genepattern/datasets/protocols/all_aml_test.preprocessed.gct"
           onclick="return openModuleWindow(this, event);"
        >Open SOMClustering with example data</a></li>
  </ul>
  </div>
    <h5>Considerations</h5>
  <ul>
    <li>For faster processing, run SOMClustering with a smaller number of iterations.
      To find the optimal set of centroids for the clusters, use the default
      value of 50000 iterations. </li>
  </ul>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td align="right">learn more:<br />
    <a href="/gp/getTaskDoc.jsp?name=SOMClustering">SOMClustering</a>
    </td>
  </tr>
</table>  
</div>

<div class="steps">
  <h2>Step 3: SOMClusterViewer</h2>
  <p>SOMClusterViewer displays a SOMClustering results (*.odf) file. 
  The left panel of the viewer shows a plot of each cluster. Click 
      a plot to display the objects in the cluster and their distance from the cluster center.
  </p>
  <div class="gpLinks">
  <ul>
    <li><a href="/gp/pages/index.jsf?lsid=SOMClusterViewer"
           onclick="return openModuleWindow(this, event);"
        >Open SOMClusterViewer</a></li>
    <li><a href="/gp/pages/index.jsf?lsid=SOMClusterViewer&som.cluster.filename=ftp://ftp.broadinstitute.org/pub/genepattern/datasets/protocols/all_aml_test.preprocessed0.odf"
           onclick="return openModuleWindow(this, event);"
        >Open SOMClusterViewer with example data</a></li>
  </ul>
  </div>
    <h5>Considerations</h5>
  <ul>
    <li>Select <i>File&gt;Save Image</i> to save the selected plot to an image  file.
      Supported formats include bmp, jpeg, png, and tiff. </li>
  </ul>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td align="right">learn more:<br />
    <a href="/gp/getTaskDoc.jsp?name=SOMClusterViewer">SOMClusterViewer</a>
    </td>
  </tr>
</table>  
  
  </div>

</body>
</html>
