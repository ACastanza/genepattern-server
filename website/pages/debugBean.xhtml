<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:t="http://myfaces.apache.org/tomahawk" 
      xmlns:c="http://java.sun.com/jstl/core">
  <ui:composition template="/templates/common.xhtml">
    <ui:define name="headText">
      <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/prototype.js"/>
      <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/moduleChooser.js"/>
      <script type="text/javascript" language="javascript">
 
/* <![CDATA[ */

	function callManagedBean(elExpression) {          
        var opt = {
          method: 'get',
          parameters: '?el=' + elExpression,
          onSuccess: receiveResponse,
          onFailure: function(t) {
            alert('Error ' + t.status + ' -- ' + t.statusText);
          }
        } 
        new  Ajax.Request('#{facesContext.externalContext.requestContextPath}/anyThingAtAll.ajax',opt);
      } 

      // The callback function - receive response from server
      function receiveResponse( req) {
      	alert(req.responseText);
        if (req.readyState == 4) {
          if (req.status == 200) { // only if "OK"
            	showCode(req.responseText);
          } 
         
        }
      }

	function showCode(code) {
		var txt = '<p>' + code + '</p>';
		Element.update('outputDiv', txt);
	}
	
 

/* ]]> */

</script>
    </ui:define>
    <ui:define name="pageTitle">Debug managed Beans</ui:define>
    
    
    <ui:define name="body">
      <!-- Error messages -->
        <input type="button" value="Call bean" onclick="callManagedBean('serverSettingsBean.modesAsString');"/>
        <div id="codeDiv"/>

    </ui:define>
  </ui:composition>
</html>
