<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk">


<ui:composition template="/templates/common.xhtml">
	<ui:define name="validationInit">
		<script type="text/javascript" language="javascript"> 
      /* <![CDATA[ */
      function onLoad()
      {
        var objForm = document.forms["loginForm"];
        objForm.username.required = 1;
        objForm.username.err = "Username is required";
      }
       /* ]]> */

    </script>
    </ui:define>
	<ui:define name="pageTitle">GenePattern sign-in</ui:define>
	<ui:define name="body">

		<h:form onsubmit="return validateForm(this);" id="loginForm">
			<table width="330">
				<tr>
					<td><span style="font-weight: bold;"> Sign-in to
					GenePattern</span></td>
					<td align="right"><h:outputLink
						value="#{facesContext.externalContext.requestContextPath}/pages/registerUser.jsf"
						rendered="#{loginBean.passwordRequired and loginBean.createAccountAllowed}">
			    Click to register
			  </h:outputLink></td>
				</tr>
			</table>

			<h:outputText
				value="Unknown username.  Click the registration link to create a new account."
				style="color: red; font-weight: old;"
				rendered="#{loginBean.unknownUser and loginBean.createAccountAllowed}" />
		
			<h:outputText
				value="Unknown username."
				style="color: red; font-weight: old;"
				rendered="#{loginBean.unknownUser and !loginBean.createAccountAllowed}" />
			

			<h:outputText value="Invalid password"
				rendered="#{loginBean.invalidPassword}"
				style="color: red; font-weight: old;" />

			<h:panelGrid columns="2">
				<h:outputLabel value="Username:" for="username"></h:outputLabel>
				<t:inputText size="50" value="#{loginBean.username}" id="username"
				    forceId="true"
					required="true" requiredMessage="Username is required"/>
				
				<h:outputLabel value="Password:" for="password"
					rendered="#{loginBean.passwordRequired}"></h:outputLabel>
				<h:inputSecret size="50" value="#{loginBean.password}" id="password"
					rendered="#{loginBean.passwordRequired}" />

			</h:panelGrid>
			<h:commandButton actionListener="#{loginBean.submitLogin}"
				value="Sign In" />
			<br />
			<h:outputLink
				value="#{facesContext.externalContext.requestContextPath}/pages/forgotPassword.jsf"
				rendered="#{loginBean.passwordRequired}">
			  Forgot your password?
			</h:outputLink>

		</h:form>
	</ui:define>


</ui:composition>
</html>
