<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:t="http://myfaces.apache.org/tomahawk" 
      xmlns:c="http://java.sun.com/jstl/core">
<ui:composition>
<h:messages showDetail="true"/>
  <h:form>
    <table width="100%" border="0" cellpadding="0" cellspacing="0" class="barhead-other">
      <tr>
        <td>Command Line Prefix</td>
      </tr>
    </table>
    <br/>
    <table width="100%" border="0" cellpadding="5" cellspacing="0">
    	<tr>
    		<td>Default Command Prefix:</td>
    		<td>
    			<h:inputText size="50" value="#{commandPrefixBean.defaultCommandPrefix}" id="defaultPrefix"/>
			</td>
			<td>
				<h:commandButton actionListener="#{commandPrefixBean.saveDefaultCommandPrefix}" value="submit" />
			</td>
		</tr>
		<tr valign="top">
	      	The default command prefix is used for all modules that do not have an explicit prefix setting below.      
	    </tr>
	    <br/><br/>
		<table class="tableheader-row" width="80%">
		  <tr valign="top">
		  	Add New Prefix:
		  </tr>
	      <tr valign="top">
	      	<td>name: </td>
			<td>
				<h:inputText size="20" value="#{commandPrefixBean.newPrefixName}" id="newPrefixName"/>
			</td>
			<td>content: </td>
			<td>
				<h:inputText size="50" value="#{commandPrefixBean.newPrefixValue}" id="newPrefixVal"/>
			</td>
			<td>
				<h:commandLink value="add prefix" actionListener="#{commandPrefixBean.saveCommandPrefixes}" />
			</td> 
	      </tr>
        </table>
        <br/><br/>
		<table class="tableheader-row" width="80%">
	        <tr valign="top">
	          <td> Name </td>
	          <td> Content </td>
	          <td> Delete </td>
	        </tr>
		  	<t:dataList id="commandPrefixTable" forceId="true" value="#{commandPrefixBean.commandPrefixes}" var="aPrefix" width="80%">
			  	<tr valign="top">
		            <td>
		              <h:outputText id="key" value="#{aPrefix.key}"/>
		            </td>
		            <td>
		              <h:outputText id="value" value="#{aPrefix.value}"/>
		            </td>
		            <td>
		              <h:commandLink actionListener="#{commandPrefixBean.deletePrefix}">
		                <h:outputText value="delete"/>
		                <f:param name="aPrefixKey" value="#{aPrefix.key}"/>
		              </h:commandLink>
		            </td>
		        </tr>
			</t:dataList>
		</table>
		<br/><br/>
		<table class="tableheader-row" width="80%">
			<tr valign="top">
			    <td> Module </td>
			    <td> Command Prefix Name </td>         
			    <td> Delete </td>
			</tr>
			<t:dataList value="#{commandPrefixBean.taskPrefixMapping}" width="80%" var="aPrefixMap">
				<tr valign="top">
		            <td>
		              <h:outputText value="#{aPrefixMap.key}" />
		            </td>         
		            <td>
		              <h:outputText value="#{aPrefixMap.value}" />
		            </td>            
		            <td>
		              <h:commandLink actionListener="#{commandPrefixBean.deleteTaskPrefixMapping}">
		                <h:outputText value="delete"/>
		                <f:param name="aPrefixMapKey" value="#{aPrefixMap.key}"/>
		              </h:commandLink>
		            </td>
		        </tr>
			</t:dataList>
		</table>
		<br/><br/>
		<table class="tableheader-row" width="80%">
			<tr valign="top">
				for modules ...
			</tr>
			<tr valign="top">
				<td>
					<h:selectManyListbox size="6" value="#{commandPrefixBean.newMappingLSID}">
						<f:selectItems value="#{moduleListBean.latestModules}" />
					</h:selectManyListbox>
				</td>
				<td>... use prefix... </td>
				<td>
					<h:selectOneMenu value="#{commandPrefixBean.newMappingPrefix}">
						<f:selectItems value="#{commandPrefixBean.commandPrefixesAsSelectItems}" />
					</h:selectOneMenu>
				</td>
				<td>
					<h:commandLink value="add mapping" actionListener="#{commandPrefixBean.savePrefixTaskMapping}" />
				</td>
			</tr>
		</table>
    </table>
</h:form>
 </ui:composition>
</html>
