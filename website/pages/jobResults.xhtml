<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	>


<ui:composition template="/templates/common.xhtml">
	<ui:define name="pageTitle">
		Job Results
	</ui:define>
	<ui:define name="scriptCode">
		
<![CDATA[ 		
<script type="text/javascript" language="javascript">

	function toggleCheckBoxes(maincheckbox) {
		alert("in toggleCheckBoxes");
		var bChecked = maincheckbox.state.selected;
		for (f = 0; f < document.forms.length; f++) {
			var frm = document.forms[f];
			for (i = 0; i < frm.elements.length; i++) {
				if (frm.elements[i].type != "checkbox") continue;
				if (frm.elements[i].name != "deleteJobID") continue;
				frm.elements[i].checked = bChecked;
			}
		}
	}
 
</script>
]]>

	</ui:define>
	<ui:define name="body">
	<h:form>
	
		<h2>
			Job Results
		</h2>
		
		<h:commandButton action="#{jobResultsBean.deleteJobs}"
				value="Delete" styleClass="little" onclick="if (!confirm('Are you sure you want to delete the selected jobs?')) return false;"/>
				
		<t:dataTable id="jobs" value="#{jobResultsBean.jobs}" var="job" sortColumn="#{jobResultsBean.sort}" 
			sortAscending="#{jobResultsBean.ascending}" preserveDataModel="false" preserveSort="true" width="100%" cellpadding="2" cellspacing="0" border="0">
			
			<h:column>
				<f:facet name="header">
					<input type="checkbox" value="" onclick="toggleCheckBoxes(this);"/>                     	
				</f:facet>
				<input type="checkbox" name="deleteJobId" value="#{job.jobNumber}" />
				<!--   <s:selectBooleanCheckbox id="#{job.jobNumber}" value=""/> -->
			</h:column>
			
			<h:column>
				<f:facet name="header">
					<t:commandSortHeader columnName="Job Number" arrow="true" id="h1"> 
						<t:outputText value="Job Number" id="o1"/> 	
					</t:commandSortHeader>		                        	
				</f:facet>
				<h:outputText value="#{job.jobNumber}" />
			</h:column>
			
			<h:column>
				<f:facet name="header">		
					<t:commandSortHeader columnName="Name" arrow="true" id="h2"> 
						<t:outputText value="Name" id="o2"/> 	
					</t:commandSortHeader> 	
				</f:facet>
				<h:outputText value="#{job.taskName}" />
			</h:column>
			
			<h:column>
				<f:facet name="header">
					<t:commandSortHeader columnName="Status" arrow="true" id="h3"> 
						<t:outputText value="Status" id="o3"/> 	
					</t:commandSortHeader>
				</f:facet>
				<h:outputText value="#{job.status}" />
			</h:column>
			
			<h:column>
				<f:facet name="header">
					<t:commandSortHeader columnName="Submitted" arrow="true" id="h4"> 
						<t:outputText value="Submitted" id="o4"/> 	
					</t:commandSortHeader>
				</f:facet>
				<h:outputText value="#{job.dateSubmitted}" />
			</h:column>
			
			<h:column>
				<f:facet name="header">
					<t:commandSortHeader columnName="Completed" arrow="true" id="h5"> 
						<t:outputText value="Completed" id="o5"/> 	
					</t:commandSortHeader>
				</f:facet>
				<h:outputText value="#{job.dateCompleted}" />
			</h:column>
			
		</t:dataTable>
	
	</h:form>
	</ui:define>
</ui:composition>
</html>
