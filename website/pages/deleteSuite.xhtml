<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:t="http://myfaces.apache.org/tomahawk" 
      xmlns:c="http://java.sun.com/jstl/core">
  <ui:composition template="/templates/common.xhtml">
    <ui:define name="pageTitle">
		GenePattern | Delete Suites
	</ui:define>
    <ui:define name="headText">
      <link href="#{facesContext.externalContext.requestContextPath}/css/style-jobresults.css" rel="stylesheet" type="text/css"/>
      <script type="text/javascript" language="javascript"> 

/* <![CDATA[ */

    function getContext() {
      return '#{facesContext.externalContext.requestContextPath}';
    }

    var jobNumbers = new Array();
    var fileRows = new Object();

    function toggleSuiteCheckboxes(jobNo)
    {
      var jobCheckboxDiv = $("cb_job_" + jobNo);
      var jobCheckbox = jobCheckboxDiv.getElementsByTagName("input")[0];
      var isChecked = jobCheckbox.checked;
      var rowIds = fileRows[jobNo];
      for(var i=0; i<rowIds.length; i++)
      {
        var row = document.getElementById(rowIds[i]);
        var elements = row.getElementsByTagName("input");
        for(var j=0; j<elements.length; j++) 
        {
          if(elements[j].type == "checkbox") {
             elements[j].checked = isChecked;
             //elements[j].disabled = isChecked;
          }
        }
      }
    }
     
    function hideCategory( jobNo ) {
      var downArrow = document.getElementById(jobNo + "_expanded_img");
      var rightArrow = document.getElementById(jobNo + "_collapsed_img");	
      downArrow.style.display ="none";
      rightArrow.style.display ="inline"	  
    
      var rowIds = fileRows[jobNo];
      for(var i=0; i<rowIds.length; i++)
      {
        row = document.getElementById(rowIds[i]);
        if(row != null) row.style.display="none";
      }
    }

    function showCategory( jobNo ) {
      var downArrow = document.getElementById(jobNo + "_expanded_img");
      var rightArrow = document.getElementById(jobNo + "_collapsed_img");	
      downArrow.style.display ="inline";
      rightArrow.style.display ="none"

      var rowIds = fileRows[jobNo];
      for(var i=0; i<rowIds.length; i++)
      {
        row = document.getElementById(rowIds[i]);
        if(row != null) row.style.display="";
      }
    }
		
	function confirmDelete() {
		return confirm('Are you sure you want to delete the selected suite(s)?');

	}
	
/* ]]> */

	</script>
    </ui:define>	
    <ui:define name="body">
      <h:form>
      <table width="100%" border="0" cellpadding="0" cellspacing="0" class="barhead-other">
        <tr>
          <td>Delete Suites</td>
        </tr>
      </table>   
      <!-- Delete suite table -->
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr class="smalltype">
          <td>&#160;</td>
          <td valign="top">
            <nobr>
              <div align="center">
                <h:commandLink actionListener="#{suiteDeleteBean.delete}" 
                               onclick="if (!confirmDelete()) return false">delete</h:commandLink> 
              </div>
            </nobr>
          </td>         
          <td>&#160;</td>
          <td>&#160;</td>
          <td>&#160;</td>
          <td>&#160;</td>          
        </tr>
        
        <tr class="tableheader-row">
          <td>version</td>
          <td>
            <div align="center">
              <input type="checkbox" onclick="toggleAllCheckboxes(this);" disabled="true"/>
            </div>
          </td>
          <td>name</td>
          <td>description&#160;</td>
          <td>author&#160;</td>
          <td>owner &#160;</td>
        </tr>
        

        <!--  Loop through suite list -->
        <script type="text/javascript" language="javascript"> var jobIndex = 0; </script>
        <c:forEach var="suiteInfo" items="#{suiteDeleteBean.suites}">
          <tr class="task-titlerow">
          	  <td>
		        <h:outputText value="#{suiteInfo.version}"/>
		      </td>
		      <td>
		        <!-- Job select checkbox -->
		        <div align="center" id="cb_suite_#{suiteInfo.name}">
		          <c:choose>
		            <c:when test="#{!suiteInfo.ownedByUser}">
		              <input type="checkbox" name="selectedSuites" disabled="true" value="#{suiteInfo.lsid}" onclick="toggleSuiteCheckboxes('#{suiteInfo.lsid}');"/>
		            </c:when>
		            <c:when test="#{suiteInfo.selected}">
		              <input type="checkbox" name="selectedSuites" checked="checked" value="#{suiteInfo.lsid}" onclick="toggleSuiteCheckboxes('#{suiteInfo.lsid}');"/>
		            </c:when>
		            <c:otherwise>
		              <input type="checkbox" name="selectedSuites" value="#{suiteInfo.lsid}" onclick="toggleSuiteCheckboxes('#{suiteInfo.lsid}');"/>
		            </c:otherwise>
		          </c:choose>
		        </div>
		      </td>
		      <td>
		        <h:outputText value="#{suiteInfo.name}"/>
		      </td>
		      <td class="task-title">
		        <h:outputText value="#{suiteInfo.description}"/>
		      </td>
		      <td>
		        <h:outputText value="#{suiteInfo.author}"/>
		      </td>
		      <td>
		        <h:outputText value="#{suiteInfo.owner}"/>
		      </td>
		  </tr>
        </c:forEach>
        
        <tr>
          <td>&#160;</td>
          <td valign="top" class="smalltype">
            <nobr>
              <div align="center">
                <h:commandLink actionListener="#{suiteDeleteBean.delete}" onclick="if (!confirmDelete()) return false">delete</h:commandLink> 
              </div>
            </nobr>
          </td>
          <td>&#160;</td>
          <td>&#160;</td>
          <td>&#160;</td>
          <td>&#160;</td>
        </tr>
      </table>
      <p>&#160;</p>
    </h:form>
    </ui:define>
    
    <!-- Create menus  
    <ui:define name="popupMenus">
      <h:form>
        <t:dataList value="#{suiteResultsBean.suites}" var="suiteInfo" rowIndexVar="suiteIndex">
          <ui:include src="suitesMenu.xhtml">
            <ui:param name="suite" value="#{suiteInfo}"/>
          </ui:include>
          <t:dataList var="fileInfo" value="#{suiteInfo.outputFileParameterInfos}" rowIndexVar="paramIndex">
            <ui:include src="suiteFileMenu.xhtml">
              <ui:param name="suite" value="#{suiteInfo}"/>
              <ui:param name="param" value="#{fileInfo}"/>       
            </ui:include>
          </t:dataList>
        </t:dataList>
      </h:form>
    </ui:define-->
 
</ui:composition>
</html>
