<!DOCTYPE html>

<!--
~ Copyright 2013 The Broad Institute, Inc.
~ SOFTWARE COPYRIGHT NOTICE
~ This software and its documentation are the copyright of the Broad Institute, Inc. All rights are reserved.
~
~ This software is supplied without any warranty or guaranteed support whatsoever. The Broad Institute is not responsible for its use, misuse, or functionality.
-->

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk">
    <f:view contentType="text/html">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta http-equiv="refresh" content="#{session.maxInactiveInterval}" />
            <meta http-equiv="x-ua-compatible" content="IE=edge" />

            <title><ui:insert name="pageTitle">GenePattern </ui:insert></title>
            
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/jquery-ui-1.9.2.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/style.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/themes/base/jquery.ui.all.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/jquery.dataTables.min.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/jobSharing.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/protocols.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/style-jobresults.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/popupMenu.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/menu.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/gp_tours.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/js/themes/default/style.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/GP_DK.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/glyphicon/glyphicon.css?version=#{aboutBean.buildTag}" />
            <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/#{uiBean.skin}/new-layout.css?version=#{aboutBean.buildTag}" />
            <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/skin/favicon.ico?version=#{aboutBean.buildTag}" />

            <script type="text/javascript" language="javascript">
                var contextRoot = '#{facesContext.externalContext.requestContextPath}';
                var createTaskAllowed = #{authorizationBean.createModuleAllowed};
                var createPublicPipelineAllowed = #{authorizationBean.createPublicPipelineAllowed};
                var createPrivatePipelineAllowed = #{authorizationBean.createPrivatePipelineAllowed};
                var createPublicSuiteAllowed = #{authorizationBean.createPublicSuiteAllowed};
                var createPrivateSuiteAllowed = #{authorizationBean.createPrivateSuiteAllowed};
                var adminServerAllowed = #{authorizationBean.adminServerAllowed};
                var genomeSpaceEnabled = #{genomeSpaceBean.genomeSpaceEnabled};
                var genomeSpaceLoggedIn = #{genomeSpaceBean.loggedIn};
                var userLoggedIn = !("${requestScope.userID}" === "null" || "${requestScope.userID}" === "");
                var username = "${requestScope.userID}";
            </script>
            
            <script type="text/javascript" src="/gp/js/jquery/jquery-1.8.3.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="/gp/js/jquery/jquery-ui-1.9.2.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.cookie.official.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.cookie.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.jstree.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.blockUI.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.highlight-4.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.jtruncate.pack.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.dialogextend.min.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.leftnav.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/ddsmoothmenu.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.dataTables.min.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.dataTables.input.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery/jquery.ajax.file.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript">var jq = jQuery.noConflict();</script>

            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/genepattern.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/mm_menu.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/popupMenu.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/commons-validator-1.3.0.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/protocol.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/menu.js?version=#{aboutBean.buildTag}" />
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/runtaskform_3_8_1.js?version=#{aboutBean.buildTag}"></script>
            <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/createChoiceDiv.js?version=#{aboutBean.buildTag}"></script>

            <script type="text/javascript" language="javascript">
            	/* <![CDATA[ */
                         
	         	// Init jQuery components
	            $(document).ready(function() {
	            	$("#left-nav").tabs({
	                    cookie:{
	                        expires:1
	                    }
	                });
	            	
	            	// Build the nav menu
	            	if (userLoggedIn) {
	            	    Menu.buildNavMenu();
	            	}
	
	            	// IE layout hack
	            	if (navigator.userAgent.indexOf("MSIE") !== -1) {
	            		jq("#systemMessageLink").css("right", "");
	            		jq("#systemMessageLink").css("left", (jq(document).width() - 500) + "px");
	            	}
	            	
	            	// Display nicely at load hack
	            	$("#left-nav-tabs").show();
	            	//$($("#left-nav-tabs .ui-tabs-active a").attr("href")).show();
	            	
	            	// Load the modules
	            	$.ajax({
                        cache: false,
	                    url: '/gp/rest/v1/tasks/all.json',
	                    dataType: 'json',
	                    success: function(data, status, xhr) {
	                    	all_modules = data.all_modules;
                            initAllModulesMap(all_modules);
                            kindToModules = data.kindToModules;
	                    	
	                    	// Initialize the displays on the left nav bar
	                    	$("#loading-modules").hide();
	                    	initPinned();
	                    	initRecent();

	                    	// Initialize the search slider
	                    	initSearchSlider();
	                    	
	                    	all_categories = data.all_categories;
	                        // Initialize the module browse button and slider
	                        var allnsuite = initBrowseTop();
	                        var browse = initBrowseModules();
	                                
	                        // Initialize the slider
	                        var modbrowse = $('#module-browse').searchslider({
	                            lists: [allnsuite, browse]
	                        });
	                        
	                        // Initialize the suites slider
	                        all_suites = data.all_suites;
	                        initBrowseSuites();
	                    },
                        error: function(data) {
                            var userAborted = !data.getAllResponseHeaders();
                            if (!userAborted) {
                                $("#loading-modules").text("Error Loading Modules");
                                $("#loading-modules").css("color", "red");
                                $("#loading-modules").css("font-size", "14pt");
                            }
                        }
	                });

//	            	$.ajax({
//	                    url: '/gp/rest/v1/suites/all.json',
//	                    dataType: 'json',
//	                    success: function(data, status, xhr) {
//	                    	all_suites = data;
//	                    	
//	                        // Initialize suites slider
//	                    	initBrowseSuites();
//	                    }
//	                });

	            	// Search box controls
	                jq("#module-search-box").keyup(function(event) {
	                    if (jq(".search-widget:visible").length === 0) {
	                    	jq("#module-search").searchslider("show");
	                        setModuleSearchTitle($(this).val())
	                    }
	                    jq("#module-search").searchslider("show");
	                    jq("#module-search").searchslider("filter", $(this).val());
	                    setModuleSearchTitle($(this).val())

                        // Handle enter key
//                        if (event.originalEvent.keyIdentifier == "Enter") {
//                            jq("#module-search").searchslider("select_default", $(this).val());
//                        }
	                });
	
	                // Browse button controls
	                jq("#module-browse-button button").button().click(function() {
                        jq( ".module-listing" ).removeHighlight();
	                	jq("#module-search-box").val("");
	                	jq("#module-browse").searchslider("show");
	                });
	            });

                // Hack for left scroll issue
                $(document).scroll(function() {
                    $(document).scrollLeft(0);
                });
            	
	            /* ]]> */
            </script>

            <!-- Use this insert to override the "onLoad" initialization method.  This function is triggered from the body onload event.  -->
            <ui:insert name="validationInit">
                <script type="text/javascript" language="javascript"> function onLoad() {} </script>
            </ui:insert>

            <ui:insert name="headText" />

        </head>
        <body onload="onLoad();">
			<!-- Floating header  -->
			<div id="header">

                <div id="top-status-box">
                    <div id="congestion-box">
                        <div class="congestion-light congestion-slow">
                            <span style="color: rgb(202, 96, 96);">&#9679;</span>
                            <span class="congestion-label">Slow Jobs</span>
                        </div>
                        <div class="congestion-light congestion-fast">
                            <span style="color: rgb(105, 153, 105);">&#9679;</span>
                            <span class="congestion-label">Fast Jobs</span>
                        </div>
                    </div>
                    <div id="quota-box">
                        Disk Quota Used
                        <div id="quota-space-progressbar">
                            <span id="quota-space-label">8.1 GB / 30 GB</span>
                        </div>
                    </div>
                    <div id="user-box" onclick="userBoxClick();">
                        <span class="glyphicon glyphicon-user"></span><span class="user-box-arrow">&#x25BC;</span>
                        <div id="user-box-name">username</div>
                    </div>
                </div>
                <script type="text/javascript">
                    $(document).ready(function() {
                        $("#quota-space-progressbar").progressbar({
                            value: 27
                        });
                        $("#quota-box").tooltip({
                                items: "div",
                                //hide: { effect: "fade", delay: 1000 },
                                content: $("#disk-quota-tooltip").html()
                            })
                            .click(function() {
                                $("#disk-quota-tooltip").dialog({
                                    title: "Disk Quota Usage"
                                }).show();
                            });
                        $(".congestion-slow").tooltip({
                                items: "div",
                                content: $("#congestion-slow-tooltip").html()
                            })
                            .click(function() {
                                $("#congestion-slow-tooltip").dialog({
                                    title: "Slow Jobs Queue"
                                }).show();
                            });
                        $(".congestion-fast").tooltip({
                                items: "div",
                                content: $("#congestion-fast-tooltip").html()
                            })
                            .click(function() {
                                $("#congestion-fast-tooltip").dialog({
                                    title: "Fast Jobs Queue"
                                }).show();
                            });
                        $("#top-status-box").find("[title]").tooltip();
                        $("#user-menu").menu();
                    });
                </script>

                <!-- Custom Tooltips -->
                <ul id="user-menu" style="display: none;">
                    <li class="showSystemMessageSpan" style="display: none;"><a href="#" onclick="showSystemMessage();">View System Message</a></li>
                    <li><a href="/gp/pages/accountInfo.jsf">My Settings</a></li>
                    <li><a href="/gp/logout">Sign Out</a></li>
                </ul>
                <div id="disk-quota-tooltip" style="display: none;">
                    <table>
                        <tr>
                            <td colspan="2">
                                <strong>Disk Quota Space Used</strong>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <em>Upload Files</em>
                            </td>
                            <td>
                                3 GB
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <em>Job Output Files</em>
                            </td>
                            <td>
                                3 GB
                            </td>
                        </tr>
                    </table>
                </div>
                <div id="congestion-slow-tooltip" style="display: none;">
                    <strong>Slow Jobs Queue</strong> <em>Average Wait Time:</em> 1 day <br/><br/>
                    The slows jobs queue is experiencing some congestion. Jobs submitted here may take several days before they run.
                </div>
                <div id="congestion-fast-tooltip" style="display: none;">
                    <strong>Fast Jobs Queue</strong> <em>Average Wait Time:</em> 2 minutes <br/><br/>
                    Congestion is light to none on the fast jobs queue.
                </div>

				<!-- User settings area -->
                <!--<t:div id="systemMessageLink" style="display: none;">-->
                    <!--<t:div rendered="#{!empty requestScope.userID}">-->
                        <!--<table height="30" border="0" cellpadding="0" cellspacing="0" class="loginsettings">-->
                            <!--<tr valign="top">-->
                                <!--<td>-->
                                    <!--<span class="showSystemMessageSpan" style="display:none;"><a href="#" onclick="showSystemMessage();" style="color:red">System Message</a> | </span>-->
                                    <!--<h:outputLink value="#{facesContext.externalContext.requestContextPath}/pages/accountInfo.jsf">-->
                                        <!--My Settings </h:outputLink> | <h:form style="display: inline;">-->
                                    <!--<h:outputLink id="logoutLink" value="#{facesContext.externalContext.request.contextPath}/logout"> Sign out </h:outputLink>-->
                                <!--</h:form> &#160;${requestScope.userID}&#160;&#160;&#160;</td>-->
                            <!--</tr>-->
                        <!--</table>-->
                    <!--</t:div>-->
                <!--</t:div>-->

				<!-- top band with the logo -->
	            <div id="topband" class="topband">
	                <h:outputLink value="#{facesContext.externalContext.requestContextPath}/pages/index.jsf" target="_top">
	                    <t:graphicImage value="/images/GP-logo.gif" alt="GenePattern" width="229" height="48" style="border: 0;" />
	                </h:outputLink>
	            </div>
	            <!-- horizontal navigation band -->
	           	<div id="navband1" class="navband1 ddsmoothmenu" style="white-space: nowrap; display:none;">
		            <ul>
		                <li><a href="/gp/pages/index.jsf">Modules &#38; Pipelines</a>
		                    <ul>
		                        <li class="createPrivatePipelineAllowed"><a href="JavaScript:Menu.denyIE('/gp/pipeline/index.jsf');">New Pipeline</a></li>
		                        <li class="createTaskAllowed"><a href="JavaScript:Menu.denyIE('/gp/modules/creator.jsf');">New Module</a></li>
		                        <li class="createTaskAllowed"><a href="/gp/pages/taskCatalog.jsf">Install From Repository</a></li>
		                        <li><a href="/gp/pages/importTask.jsf">Install From ZIP</a></li>
		                        <li><a href="/gp/pages/manageTasks.jsf">Manage</a></li>
		                    </ul>
		                </li>
                        <li><a href="/gp/pages/manageSuite.jsf">Suites</a>
                            <ul>
                                <li class="createPrivateSuiteAllowed"><a href="/gp/pages/createSuite.jsf">New Suite</a></li>
                                <li class="createPublicSuiteAllowed"><a href="/gp/pages/suiteCatalog.jsf">Install From Repository</a></li>
                                <li><a href="/gp/pages/importTask.jsf?suite=1">Install From ZIP</a></li>
                                <li><a href="/gp/pages/manageSuite.jsf">Manage</a></li>
                            </ul>
                        </li>
		                <li><a id="job-results" href="/gp/pages/index.jsf?jobResults=userId%3D${requestScope.userID}">Job Results</a>
		                    <ul>
		                        <li><a href="/gp/pages/index.jsf?jobResults=userId%3D${requestScope.userID}">Results Summary</a></li>
		                    </ul>
		                </li>
		                <li><a href="/gp/pages/index.jsf?splash=resources">Resources</a>
		                    <ul>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/gp_mail.html')">Mailing List</a></li>
		                        <li><a href="/gp/pages/contactUs.jsf">Report Bugs</a></li>
		                        <li><a href="/gp/pages/contactUs.jsf">Contact Us</a></li>
                                <li><a href="/gp/pages/downloadProgrammingLibaries.jsf">Programming Languages</a></li>
                                <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/datasets/')">Public Datasets</a></li>
                                <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/software/gparc/')">GParc</a></li>
		                    </ul>
		                </li>
		                <li class="adminServerAllowed"><a href="/gp/pages/serverSettings.jsf">Administration</a>
		                    <ul>
		                        <li><a href="/gp/pages/serverSettings.jsf">Server Settings</a></li>
		                    </ul>
		                </li>
		                <li><a href="/gp/pages/index.jsf">Help</a>
		                    <ul>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/tutorial/gp_tutorial.html')">Tutorial</a></li>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/desc/videos')">Video Tutorial</a></li>
                                <li><a class="gp_tours" href="#">Tour of GenePatttern UI</a></li>
                                <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/tutorial/gp_web_client.html')">User Guide</a></li>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/tutorial/gp_programmer.html')">Programmers Guide</a></li>

                                <li><a href="/gp/getTaskDoc.jsp">Module Documentation</a></li>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/gp_guides/file-formats')">File Formats</a></li>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/doc/relnotes/current/')">Release Notes</a></li>
		                        <li><a href="JavaScript:Menu.go('http://www.broadinstitute.org/cancer/software/genepattern/doc/faq/')">FAQ</a></li>
		                        <li><a href="/gp/pages/about.jsf">About</a></li>
		                    </ul>
		                </li>
		                <li class="genomeSpaceMenu">
		                	<a href="/gp/pages/index.jsf"><img src="/gp/pages/genomespace/genomespace_icon.gif" class="genomeSpaceIcon" alt="GenomeSpace"></img>GenomeSpace</a>
		                    <ul>
		                        <li class="genomeSpaceLoggedOut"><a href="/gp/pages/genomespace/signon.jsf">Login</a></li>
		                        <li class="genomeSpaceLoggedIn"><a href="/gp/pages/genomespace/signon.jsf">Logout</a></li>
		                        <li class="genomeSpaceLoggedOut"><a href="JavaScript:Menu.go('http://genomespace.org/register')">Register</a></li>
		                        <li class="genomeSpaceLoggedIn"><a href="/gp/pages/genomespace/privateTool.jsf">Add as Private Tool</a></li>
		                        <li><a href="JavaScript:Menu.go('https://gsui.genomespace.org/jsui/')">GenomeSpace UI</a></li>
		                        <li><a href="JavaScript:Menu.go('http://www.genomespace.org/')">About</a></li>
		                    </ul>
		                </li>
		            </ul>
		            <br style="clear: left"/>
		            <script type="text/javascript">
		            	if (userLoggedIn) {
		            		jq("#navband1").ready(function() {
		            			Menu.initNavMenu();
		            		});	
		            	}
		            	
						// Stub out old embeded javascript calls
		                function MM_swapImage() { return true; }
		                function MM_swapImgRestore() { return true; }
		            </script>
		        </div>
			</div>
            
            <!--  Main content area -->
            <div id="content" class="content">
            
            	<!-- Insert the left nav -->
            	<div id="left-nav">
            		<ul id="left-nav-tabs">
	                    <li id="left-nav-modules-tab"><a href="#left-nav-modules">Modules</a></li>
	                    <li id="left-nav-jobs-tab"><a href="#left-nav-jobs">Jobs</a></li>
	                    <li id="left-nav-files-tab"><a href="#left-nav-files">Files</a></li>
	                    <h:outputText rendered="#{genomeSpaceBean.loggedIn}">
                        	<li id="left-nav-genomespace-tab"><a href="#left-nav-genomespace">GenomeSpace</a></li>
                        </h:outputText>
	                </ul>
	                <div id="left-nav-modules" class="left-nav-tab">
	                	<div class="left-nav-top">
		                    <div id="module-search-block">
		                        <input id="module-search-box" type="search" class="search-box" placeholder="Search Modules &amp; Pipelines" />
		                    </div>
		                    <div id="module-browse-button">
		                    	<div class="current-job-status">
                                    <a onclick="loadJobResults('userId=${requestScope.userID}'); return false;" href="/gp/pages/index.jsf?jobResults=userId%3D${requestScope.userID}"></a>
                                </div>
		                        <button>Browse Modules &#x203a;</button>
		                    </div>
	                    </div>
                        <div id="left-nav-modules-list">
                            <div id="loading-modules">
                                <h4>Loading GenePattern Modules...</h4>
                                <img src="/gp/images/ajax.gif" height="100" width="100" alt="Loading..." />
                            </div>
                            <div id="pinned-modules"></div>
                            <div id="recent-modules"></div>
                        </div>
	                </div>
		            <div id="left-nav-jobs" class="left-nav-tab">
                        <div class="left-nav-top">
                            <button id="left-nav-jobs-refresh"><span class="glyphicon glyphicon-refresh"></span> Refresh</button>
                            <button id="left-nav-jobs-browse">Browse Jobs &#x203a;</button>
                        </div>
                        <h:outputText rendered="!#{uiBean.newUI}">
	                        <ui:include src="/pages/recentJobs.xhtml" />
                        </h:outputText>
                        <h:outputText rendered="#{uiBean.newUI}">
                            <div id="loading-jobs">
                                <h4>Loading GenePattern Jobs...</h4>
                                <img src="/gp/images/ajax.gif" height="100" width="100" alt="Loading..." />
                            </div>
                            <div id="left-nav-jobs-list"></div>
                            <script type="text/javascript">
                                $(document).ready(function() {
                                    // Load the running jobs, poll every 30 seconds
                                    jobStatusPoll();
                                });
                        </script>
                        </h:outputText>
	                </div>
	                <div id="left-nav-files" class="left-nav-tab">
                        <div class="left-nav-top">
                            <div class="current-job-status">
                                <a onclick="loadJobResults('userId=${requestScope.userID}'); return false;" href="/gp/pages/index.jsf?jobResults=userId%3D${requestScope.userID}"></a>
                            </div>
                        </div>
	                    <ui:include src="/pages/uploads/uploadedFiles.xhtml" />
	                </div>
	                <h:outputText rendered="#{genomeSpaceBean.loggedIn}">
		                <div id="left-nav-genomespace" class="left-nav-tab">
		                    <ui:include src="/pages/genomespace/genomespaceFiles.xhtml" />
		                </div>
		            </h:outputText>
            	</div>
            	
				<div id="module-search"></div>
	            <div id="module-browse"></div>
	            <div id="module-suites"></div>

                <div id="menus-uploads"></div>
                <div id="menus-jobs"></div>
                <div id="menus-genomespace"></div>
                <div id="menus-inputs"></div>
	
	            <div id="main-pane">
	            	<!-- Error message area -->
	            	<div id="errorMessageDiv" style="display:none;">
		            	<span id="errorMessageHeader" style="font-weight:bold">
		                	Please correct the following errors before proceeding:
		              	</span>
	                    <div id="errorMessageContent"></div>
	               </div>

                    <!-- Info message area -->
                    <div id="infoMessageDiv" style="display:none;">
                        <div id="infoMessageContent"></div>
                    </div>
               
	               <!-- Include System Alert Message  -->
	               <t:div id="systemAlertMessage" rendered="#{systemMessageBean.systemMessage != null}">
	                   <ui:include src="../pages/systemMessage.xhtml" />
	               </t:div>
	
	               <!-- JSF (Server side) errors or messages -->
	               <ui:include src="../pages/messages.xhtml" />
	               <h:outputText rendered="#{!empty facesContext.maximumSeverity}"><br /></h:outputText>
	            
	            	<ui:insert name="body" />
	            </div>
	        </div>
            
            <!-- Floating footer area -->
            <div id="footer">
            	<table width="100%" border="0" cellspacing="0" cellpadding="0">
	                <tr>
	                    <td>
	                        <h:outputLink value="#{facesContext.externalContext.requestContextPath}/pages/about.jsf">About GenePattern</h:outputLink>&#160;|&#160;<h:outputLink value="#{facesContext.externalContext.requestContextPath}/pages/contactUs.jsf">Contact Us</h:outputLink>
	                    </td>
	                    <td>
	                        <div align="right">&#169;2003-2014&#160; <h:outputLink value="http://www.broadinstitute.org" target="_blank">Broad Institute, MIT</h:outputLink>
	                        </div>
	                    </td>
	                    <td width="10">&#160;</td>
	                    <td width="27">
	                        <h:outputLink value="http://www.broadinstitute.org" target="_blank">
	                            <t:graphicImage value="/images/broad-symbol.gif" alt="Broad Institute" width="27" height="30" style="border: 0;" />
	                        </h:outputLink>
	                    </td>
	                </tr>
	            </table>
            </div>
        </body>
    </f:view>
</html>
